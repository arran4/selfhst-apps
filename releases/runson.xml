<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
  <id>https://selfh.st/apps</id>
  <title>RunsOn Releases</title>
  <updated>2024-11-26T22:33:21.491042-05:00</updated>
  <author>
    <name>selfh.st</name>
    <email>contact@selfh.st</email>
  </author>
  <link href="https://selfh.st/apps" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <subtitle>Self-hosted software releases generated by selfh.st</subtitle>
  <entry>
    <id>https://github.com/runs-on/runs-on/releases/tag/v2.5.4</id>
    <title>New release for RunsOn: v2.5.4</title>
    <updated>2024-09-25T11:16:35-04:00</updated>
    <author>
      <name>runs-on/runs-on</name>
    </author>
    <content>&lt;p&gt;New ubuntu24 images, new housekeeping task to auto-restart instances that failed to launch, new always-on Private setting, additional runner details in logs, and more.&lt;/p&gt;
&lt;h2&gt;Notable changes (from v2.5.0 to v2.5.4)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Add ubuntu24 official images: &lt;code&gt;ubuntu24-full-x64&lt;/code&gt; and &lt;code&gt;ubuntu24-full-arm64&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Private&lt;/code&gt; CloudFormation parameter now accepts &lt;code&gt;always&lt;/code&gt; as value, in which case the runners will always launch in the private subnets by default (unless opt-out with &lt;code&gt;private=false&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Display GitHub current rate-limits in logs (search for &lt;code&gt;tokens&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Add 'Private' dimension to cloudwatch stats.&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;Environment&lt;/code&gt;, &lt;code&gt;IsPrivate&lt;/code&gt;, and &lt;code&gt;StaticIp&lt;/code&gt; (if IsPrivate) to runner details (in Setup job logs)&lt;/li&gt;
&lt;li&gt;Increase frequency for spot interruption polling + add logs.&lt;/li&gt;
&lt;li&gt;Conform to AWS spec when sanitizing custom tags (key and value). Fixes #125.&lt;/li&gt;
&lt;li&gt;Add housekeeping task to handle edge cases where a job is still seen as queued by GitHub after a few minutes even after an instance has been launched.&lt;/li&gt;
&lt;li&gt;Allow to disable new housekeeping mechanism.&lt;/li&gt;
&lt;li&gt;Properly tag instance volumes with cost allocation tag. Cost report email will likely go up.&lt;/li&gt;
&lt;li&gt;Display &lt;code&gt;app_environment&lt;/code&gt; and &lt;code&gt;app_stack_name&lt;/code&gt; in logs.&lt;/li&gt;
&lt;li&gt;Attempt to fix rare preinstall issue ending up with "text file busy".&lt;/li&gt;
&lt;li&gt;Unregister runner from GitHub when job is completed (i.e. do not wait for auto-expiration since it does not seem that reliable).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Experimental&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Bring back support for single string label, using &lt;code&gt;/&lt;/code&gt; as the separator instead of &lt;code&gt;,&lt;/code&gt;. e.g. &lt;code&gt;runs-on: runs-on/runner=2cpu-linux-x64/other=tag&lt;/code&gt; will work. This simplifies passing a runs-on specification as input to dependent workflows. If you have multiple RunsOn stacks, make sure they are all upgraded to this version before using this new syntax in workflows.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Internal&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix issue with &lt;code&gt;private&lt;/code&gt; attribute not being properly loaded from the repository configuration file.&lt;/li&gt;
&lt;li&gt;Switch to semaphores for processing the 3 queues.&lt;/li&gt;
&lt;li&gt;Check workflow run status before scheduling job.&lt;/li&gt;
&lt;li&gt;Add termination queue.&lt;/li&gt;
&lt;li&gt;Update GitHub App (for new installations) to listen for workflow_run events (not used yet, but will be soon).&lt;/li&gt;
&lt;li&gt;Upgrade default runner version when no runner is preinstalled.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Upgrade notes&lt;/h2&gt;
&lt;p&gt;When upgrading from v2.5.0 or lower, due to the rolling restart mechanism, some jobs that were received by a process launched with this version might end up being processed by the old app version, in which case you might get errors like &lt;code&gt;json: cannot unmarshal string into Go struct field RunnerLabels.Labels.Private of type bool&lt;/code&gt; in your logs, and some runners may fail to launch. This is due to an internal structure change, and you simply need to cancel and retry those jobs once, or let the new housekeeping job reschedule them. After a few minutes the old app process will be gone and everything should work as expected.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://runs-on.com/guides/upgrade/"&gt;Upgrade Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CloudFormation Versioned template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template-v2.5.4.yaml&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/runs-on/runs-on/releases/tag/v2.5.4" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/runs-on/runs-on/releases/tag/v2.5.5</id>
    <title>New release for RunsOn: v2.5.5</title>
    <updated>2024-10-16T13:04:54-04:00</updated>
    <author>
      <name>runs-on/runs-on</name>
    </author>
    <content>&lt;p&gt;Strengthen CF template configuration to better conform to AWS guidelines. Bug fixes.&lt;/p&gt;
&lt;h2&gt;What's changed&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Verify that generated JIT token has at least one char.&lt;/li&gt;
&lt;li&gt;Do not attempt to retry runner creation when we know the original request is invalid (e.g. invalid runner configuration due to mismatched labels etc.)&lt;/li&gt;
&lt;li&gt;Strengthen CF template configuration to better conform to AWS guidelines.&lt;/li&gt;
&lt;li&gt;Make sure empty admin values are ignored.&lt;/li&gt;
&lt;li&gt;If no repository config found, cache the result for 1 minute to avoid hammering GitHub API.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Upgrade&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://runs-on.com/guides/upgrade/"&gt;Upgrade Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CloudFormation Versioned template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template-v2.5.5.yaml&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/runs-on/runs-on/releases/tag/v2.5.5" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/runs-on/runs-on/releases/tag/v2.5.6</id>
    <title>New release for RunsOn: v2.5.6</title>
    <updated>2024-10-18T04:47:12-04:00</updated>
    <author>
      <name>runs-on/runs-on</name>
    </author>
    <content>&lt;p&gt;Enable IPv6 for runners. Allow to specify multiple static IPs for the managed NAT gateway. Allow filtering images based on tags. A lot of changes (again) around GitHub rate-limit handling and housekeeping mechanism.&lt;/p&gt;
&lt;h2&gt;New features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Enable IPv6 for runners (fixes #142). An IPv6 is attached for both public and private runners, with an egress ipv6 (free) gateway for private instances.&lt;/li&gt;
&lt;li&gt;Allow to specify multiple static IPs for the managed NAT gateway (fixes #139). By default up to 2 are possible, and up to 8 when a quota increase is requested. This helps if you are launching a large number of runners in private subnets, and some external service rate-limits you based on the IP.&lt;/li&gt;
&lt;li&gt;Allow filtering images based on a tag, in addition to the name wildcard (e.g. &lt;code&gt;is-production-ready=true&lt;/code&gt;). Example :&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;```yaml&lt;/p&gt;
&lt;h1&gt;.github/runs-on.yml&lt;/h1&gt;
&lt;p&gt;images:
  custom:
    owner: "123456789"
    name: "my-org/my-image-name-&lt;em&gt;"
    arch: x64
    platform: linux
    tags:
      # filter with specific value
      is-production-ready: "true"
      # allow any value
      other-tag: "&lt;/em&gt;"
&lt;code&gt;``
- Automatically bind-mount&lt;/code&gt;/var/lib/docker` on the ephemeral instance storage, if any. Fixes #144.&lt;/p&gt;
&lt;h2&gt;Bug fixes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Escape shell special characters in env file values.&lt;/li&gt;
&lt;li&gt;If a matching AMI cannot be found, do not retry and alert on first error.&lt;/li&gt;
&lt;li&gt;Do not attempt to retry job if generated fleet params configuration is incorrect.&lt;/li&gt;
&lt;li&gt;Abort early if workflow run status cannot be checked.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Fixes to avoid GitHub rate-limit issues&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;No longer attempt to reschedule jobs where a runner theft is suspected. Instead log a warning message telling users to make sure their jobs &lt;a href="https://runs-on.com/guides/troubleshoot/#long-queuing-time-for-some-workflows"&gt;have unique enough labels&lt;/a&gt;. In some cases this was triggering useless reschedules due to GitHub not reflecting the job state quickly enough.&lt;/li&gt;
&lt;li&gt;Fix too many GitHub calls when fetching repo config from an &lt;code&gt;extends&lt;/code&gt; attribute (cache it).&lt;/li&gt;
&lt;li&gt;No longer unregister runners from GitHub if API credit is lower than 2500. They will be &lt;a href="https://github.blog/changelog/2022-08-03-github-actions-remove-offline-self-hosted-runners/"&gt;removed by GitHub&lt;/a&gt; 24h later anyway.&lt;/li&gt;
&lt;li&gt;Reorganize rate-limiters, increase &lt;code&gt;DELAY_SECONDS_FOR_CHECK_BACK&lt;/code&gt; to 180s instead of 120s. Enable github rate-limiter, and set burst to the current number of remaining tokens.&lt;/li&gt;
&lt;li&gt;Only attempt to finalize a job once at most. Instance will auto-terminate anyway so at worst we lose the job usage metrics in CloudWatch. But at least we don't eat into the GitHub / EC2 credits.&lt;/li&gt;
&lt;li&gt;Set housekeeping and termination queue sizes to 1 to reduce their impact on GitHub API credits.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Upgrade&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://runs-on.com/guides/upgrade/"&gt;Upgrade Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CloudFormation Versioned template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template-v2.5.6.yaml&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/runs-on/runs-on/releases/tag/v2.5.6" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/runs-on/runs-on/releases/tag/v2.5.8</id>
    <title>New release for RunsOn: v2.5.8</title>
    <updated>2024-10-30T17:12:19-04:00</updated>
    <author>
      <name>runs-on/runs-on</name>
    </author>
    <content>&lt;p&gt;Revert x/time dependency to v0.6.0 since v0.7.0 introduced a &lt;a href="https://cs.opensource.google/go/x/time/+/refs/tags/v0.7.0:rate/rate.go;bpv=1;bpt=0;drc=772484ea383fac83b7da05684a96ae628b251bcd;dlc=883aed519795b30de35e6bc28ec8f681494afa87"&gt;breaking change&lt;/a&gt; for rate-limits when using a zero limit.&lt;/p&gt;
&lt;h2&gt;Upgrade&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://runs-on.com/guides/upgrade/"&gt;Upgrade Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CloudFormation Versioned template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template-v2.5.8.yaml&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/runs-on/runs-on/releases/tag/v2.5.8" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/runs-on/runs-on/releases/tag/v2.5.9</id>
    <title>New release for RunsOn: v2.5.9</title>
    <updated>2024-11-06T05:51:52-05:00</updated>
    <author>
      <name>runs-on/runs-on</name>
    </author>
    <content>&lt;p&gt;Fix GitHub webhook &lt;code&gt;custom_properties&lt;/code&gt; handling when non-string values.&lt;/p&gt;
&lt;h2&gt;Upgrade&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://runs-on.com/guides/upgrade/"&gt;Upgrade Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CloudFormation Versioned template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template-v2.5.9.yaml&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/runs-on/runs-on/releases/tag/v2.5.9" rel="alternate"/>
  </entry>
</feed>
